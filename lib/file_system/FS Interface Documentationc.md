# `FSInterface` 类

## 简介

`FSInterface` 类提供了一个抽象的文件系统接口，封装了底层存储实现（如 LittleFS、SD、FATFS 等, 目前仅支持 LittleFS），使上层应用可以无缝切换存储后端。通过该接口，可以进行文件操作、目录操作和文件系统管理等。

## 主要功能

- **文件系统挂载与卸载**：挂载或卸载文件系统，初始化或释放相关资源。
- **文件操作**：打开、关闭、读取、写入文件，以及获取文件信息（如大小、最后修改时间、文件名等）。
- **目录操作**：打开目录、列出目录下的文件或子目录、创建和删除目录等。
- **文件系统管理**：删除、重命名文件或目录，检查路径是否存在，获取文件系统的总空间和已用空间，格式化文件系统等。

---

| 方法名              | 功能描述                                             | 参数                                                         | 返回值                                                       |
| ------------------- | ---------------------------------------------------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| `mount()`           | 挂载 LittleFS 文件系统。                             | 无                                                           | `bool`：`true` 表示挂载成功，`false` 表示挂载失败。          |
| `unmount()`         | 卸载 LittleFS 文件系统。                             | 无                                                           | 无                                                           |
| `open()`            | 打开指定路径的文件。                                 | 1. `path` (` std::string`)：文件路径。<br>2. `mode` (`char*`)：打开模式。  `"r"`:只读,要求文件必须存在;   `"w"`:覆写,文件不存在则创建,存在则清空;  `"a"`:追加,文件不存在则创建;   `"r+"`:读写,要求文件必须存在;  `"w+"`:覆写读,文件不存在则创建,存在则清空; | `bool`：`true` 表示打开成功，`false` 表示打开失败。          |
| `openDir()`         | 打开指定路径的目录。                                 | `path` (`std::string&`)：目录路径。                          | `bool`：`true` 表示打开成功，`false` 表示打开失败。          |
| `close()`           | 关闭当前打开的文件。                                 | 无                                                           | `bool`：`true` 表示关闭成功，`false` 表示关闭失败。          |
| `read()`            | 从当前打开的文件中读取数据。                         | 1. `buffer` (`void*`)：存储数据的缓冲区，函数将读取的数据写入这个内存区域。<br>2. `size` (`size_t`)：要读取的字节数。 | `size_t`：实际读取的字节数。                                 |
| `write()`           | 向当前打开的文件中写入数据。                         | 1. `buffer` (`void*`)：指向待写入数据的缓冲区指针。<br>2. `size` (`size_t`)：要写入的字节数。 | `size_t`：实际写入的字节数。                                 |
| `getSize()`         | 获取当前打开文件的大小（字节）。                     | 无                                                           | `size_t`：文件大小，若文件未打开或不存在，返回 `-1`。        |
| `getLastWrite()`    | 获取当前打开文件的最后修改时间（UNIX 时间戳）。      | 无                                                           | `uint32_t`：最后修改时间，获取失败则返回 `0`。               |
| `name()`            | 获取当前打开文件的名称。                             | 无                                                           | `std::string`：文件名，若未打开文件则返回空字符串。          |
| `remove()`          | 删除指定路径的文件或空目录。                         | `path` (`std::string`)：文件或目录路径。                     | `bool`：`true` 表示删除成功，`false` 表示删除失败。          |
| `rename()`          | 重命名或移动文件。                                   | 1. `old_path` (`std::string`)：原文件路径。<br>2. `new_path` (`std::string`)：新文件路径。 | `bool`：`true` 表示操作成功，`false` 表示操作失败。          |
| `mkdir()`           | 创建空目录。                                         | `path` (`std::string`)：目录路径。                           | `bool`：`true` 表示创建成功，`false` 表示创建失败。          |
| `rmdir()`           | 删除空目录。                                         | `path` (`std::string`)：目录路径。                           | `bool`：`true` 表示删除成功，`false` 表示删除失败。          |
| `deletePath()`      | 递归删除指定路径的文件或目录。                       | `path` (`std::string`)：文件或目录路径。                     | `bool`：`true` 表示删除成功，`false` 表示删除失败。          |
| `isDirectory()`     | 判断文件是否为目录。                                 | `path` (`std::string`)：文件或目录路径。如果提供了路径，则判断指定路径是否为目录; 如果没有提供路径，则判断当前打开的文件是否为目录。 | `bool`：`true` 表示是目录，`false` 表示不是目录。            |
| `dirNextName()`     | 获取当前打开目录下的下一个文件或目录的名称。         | 无                                                           | `std::string`：文件或目录名称，若无更多文件，返回空字符串。  |
| `listFiles()`       | 获取当前打开目录下的所有文件或目录的名称列表。       | 无                                                           | `std::vector<std::string>`：文件或目录名称列表。             |
| `rewindDirectory()` | 重置目录遍历指针，使其指向目录的开头。               | 无                                                           | 无                                                           |
| `exists()`          | 检查指定路径的文件或目录是否存在。                   | `path` (`std::string`)：文件或目录路径。                     | `bool`：`true` 表示存在，`false` 表示不存在。                |
| `available()`       | 检查当前打开的文件中是否还有数据可读取。             | 无                                                           | `int`：从当前读取位置到文件末尾之间剩余的字节数，为 `0` 时表示没有更多数据可读取。 |
| `totalSpace()`      | 获取文件系统的总空间(字节)。                         | 无                                                           | `size_t`：文件系统的总空间。                                 |
| `usedSpace()`       | 获取文件系统的已用空间(字节数)。                     | 无                                                           | `size_t`：文件系统的已用空间。                               |
| `format()`          | 格式化文件系统，删除所有文件和目录，恢复到初始状态。 | 无                                                           | `bool`：`true` 表示格式化成功，`false` 表示格式化失败。      |
| `sync()`            | 强制将缓存中的数据写入当前打开的文件。               | 无                                                           | 无                                                           |

**注意事项：**

- 在进行文件或目录操作前，确保已成功挂载文件系统（调用 `mount()` 方法）。
- 操作完成后，建议调用 `unmount()` 方法卸载文件系统，以释放资源。
- 在进行文件读写操作前，需先调用 `open()` 方法打开文件，操作完成后调用 `close()` 方法关闭文件。
- 某些操作（如 `write()`、`remove()` 等）可能会修改文件系统中的数据，建议在操作前确认操作的正确性，以避免数据丢失。
- `format()` 方法会删除文件系统中的所有数据，使用时需谨慎。 

---
