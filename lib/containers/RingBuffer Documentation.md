# RingBuffer 模板容器 使用指南

## 📦 概述

`RingBuffer<T, Capacity>` 是一个面向资源受限嵌入式系统设计的通用环形缓冲区模板类。  

- **固定容量**：编译期分配，无动态内存分配  
- **高效 O(1)**：所有插入、删除、访问操作时间复杂度均为常数  
- **自动覆盖**：满时自动覆盖最旧数据，保证持续写入  

---

## 🛠️ 缓冲区管理

| 操作         | 方法                                           | 参数                                    |
| ------------ | ---------------------------------------------- | --------------------------------------- |
| 初始化缓冲区 | `RingBuffer<typename T, std::size_t Capacity>` | 存储元素的类型, 缓冲区容量(必须大于`0`) |
| 清空缓冲区   | `void clear()`                                 |                                         |

## 📥 插入与弹出

| 操作                 | 方法                            | 参数           | 返回值             | 描述                                   |
| -------------------- | ------------------------------- | -------------- | ------------------ | -------------------------------------- |
| 将元素推入缓冲区尾部 | `void pushBack(const T& value)` | 要插入的元素值 |                    | 若缓冲区已满，则按插入顺序覆盖最旧元素 |
| 弹出最新元素         | `bool popBack()`                |                | 弹出成功返回`ture` | 删除缓冲区中最新的元素                 |
| 弹出最旧元素         | `bool popFront()`               |                | 弹出成功返回`ture` | 删除缓冲区中最旧的元                   |

## 💡 访问元素
| 操作           | 方法                       | 参数                                              | 返回值       | 描述                                               |
| -------------- | -------------------------- | ------------------------------------------------- | ------------ | -------------------------------------------------- |
| 获取最旧的元素 | `T& front()`               |                                                   | 最旧元素值   | 返回最旧元素，缓冲区为空时抛出 `std::out_of_range` |
| 获取最新的元素 | `T& back()`                |                                                   | 最新元素值   | 返回最新元素，缓冲区为空时抛出 `std::out_of_range` |
| 随机访问元素   | `T& at(std::size_t index)` | 位置索引（`0` 为最旧元素，`size()-1` 为最新元素） | 索引的元素值 | 索引越界时抛出`std::out_of_range`                  |

## 🔍 状态查询
| 操作                   | 方法                     | 返回值                      | 描述                            |
| ---------------------- | ------------------------ | --------------------------- | ------------------------------- |
| 获取当前储存的元素数量 | `std::size_t size()`     | 当前存储的元素数量          | `size()-1` 为最新元素的索引位置 |
| 获取缓冲区的容量       | `std::size_t capacity()` | 缓冲区最大容量              |                                 |
| 判断缓冲区是否为空     | `bool empty()`           | `true`: 为空; `false`: 非空 |                                 |
| 判断缓冲区是否已满     | `bool full()`            | `true`: 已满; `false`: 未满 |                                 |

---

## 🧩 使用示例

```cpp
#include <ring_buffer.h>

void setup() {
    Serial.begin(115200);
    delay(4000);

    // 初始化缓冲区(储存字符串类型的元素, 缓冲区容量设为3个元素)
    RingBuffer<std::string, 3> buf;

    // 将多个元素推入缓冲区尾部
    buf.pushBack("1");
    buf.pushBack("2");
    buf.pushBack("3");
    // 缓冲区已满,自动覆盖最旧元素
    buf.pushBack("4");

    // 输出缓冲区的所有元素
    for (size_t i = 0; i < buf.size(); ++i) {
        Serial.println(buf.at(i).c_str());
    }
}
```

串口输出:

```
2
3
4
```

---

